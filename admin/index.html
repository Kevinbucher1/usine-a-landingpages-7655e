<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Content Manager - Test Minimal</title>
</head>
<body>
  
  <div id="nc-root"></div>

  <script src="https://unpkg.com/decap-cms@3.1.10/dist/decap-cms.js"></script>
  
  <script>
    // Note : Le formateur personnalisé a été temporairement retiré.

    // Configuration la plus simple possible
    var config = {
      backend: {
        name: "git-gateway",
        branch: "master",
      },
      media_folder: "static/img",
      collections: [
        // On ne garde qu'une seule collection pour le test
        {
          name: "landing_pages",
          label: "Landing Page",
          folder: "pages/lps",
          create: true,
          slug: "{{slug}}",
          extension: "njk",
          // On utilise le format par défaut, pas notre format personnalisé
          format: "frontmatter", 
          fields: [
            { label: "Titre de la page", name: "title", widget: "string", required: true },
            { label: "Contenu HTML de la page", name: "body", widget: "markdown" },
          ],
        },
      ],
    };

    // Initialisation du CMS
    CMS.init({ config });
  </script>
</body>
</html>
